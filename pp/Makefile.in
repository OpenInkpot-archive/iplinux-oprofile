all: oprofpp
 
.PHONY: all clean srcdoc 
 
clean: 
	rm -f oprofpp *.o oprofpp-src.html
 
CC=@CC@
prefix=@prefix@
exec_prefix=@exec_prefix@
BINDIR=@bindir@
MANDIR=@mandir@

install: oprofpp
	cp oprofpp $(BINDIR)/oprofpp
	cd $(BINDIR) && chmod 755 oprofpp
 
CFLAGS=-Wall -Wstrict-prototypes -W -pipe -DOP_EVENTS_DESC -L/usr/lib @CFLAGS@
LIBS=-lpopt -lbfd -liberty -ldl
INCLUDES=@extra_includes@
HEADERS=oprofpp.h ../dae/opd_util.h
MY_SOURCES=oprofpp.c
SOURCES=$(MY_SOURCES) ../dae/opd_util.c ../op_events.c
 
srcdoc: oprofpp-src.html

oprofpp-src.html: $(MY_SOURCES)
	../scripts/dodoc -html $(MY_SOURCES) >oprofpp-src.html
 
oprofpp: $(SOURCES) $(HEADERS)
	$(CC) $(CFLAGS) $(INCLUDES) -o $@ $(SOURCES) $(LIBS)
