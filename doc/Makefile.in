# $Id$

prefix=@prefix@
MANDIR=@mandir@/man1
CATDIR=@mandir@/cat1
LN_SF=ln -sf
RM=rm
CP=cp
MKDIR=mkdir
MKDIR_P=$(MKDIR) -p
DB2HTML=db2html
LINK_LIST=oprofiled.1 op_start.1 op_stop.1 op_help.1 oprofpp.1

.PHONY: all clean install uninstall

all:
	-$(RM) -rf oprofile.junk
	$(DB2HTML) oprofile.sgml
	-$(MKDIR) html
	-$(MKDIR) html/stylesheet-images/ 
	-mv oprofile/* html/
	-mv oprofile/stylesheet-images/* html/stylesheet-images/
	-$(RM) -rf oprofile 
 
install:
	-$(MKDIR_P) $(MANDIR)
	cp oprofile.1 $(MANDIR)/oprofile.1
	@for f in $(LINK_LIST); do				\
		$(RM) -f $(MANDIR)/$$f;				\
		$(CP) -f $$f $(MANDIR)/$$f;			\
	done

uninstall:
	rm -f $(MANDIR)/oprofile.1
	rm -f @mandir@/cat1/oprofile.1.gz
	@for f in $(LINK_LIST); do		\
		rm -f $(MANDIR)/$$f;		\
		rm -f $(CATDIR)/cat1/$$f.gz;	\
	done

clean:
